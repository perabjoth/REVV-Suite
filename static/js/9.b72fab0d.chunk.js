(this["webpackJsonprevv-suite"]=this["webpackJsonprevv-suite"]||[]).push([[9],{1362:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return ke}));var r=a(1318),i=a(56),n=a.n(i),s=a(84),o=a(39),c=a(40),l=a(41),d=a(42),u=a(639),f=a(0),j=a.n(f),p=a(640),b=a.n(p),h=a(146),v=a(85),O=a.n(v).a.create({baseURL:"https://us-east-1.aws.webhooks.mongodb-realm.com/api/client/v2.0/app/revv-suite-qdwss/service/revv-data/incoming_webhook/"}),g=a(530),m=a(900),x=a(658),V=a(337),P=a(339),R=a(1345),w=a(1350),E=a(336),k=a(319),z=a(322),S=a(662),D=a(648),T=a(644),F=a(661),C=a(649),y=a(317),A=a(822),I=a(133),_=a(901),L=a.n(_),W=a(669),U=a.n(W),$=a(681),N=a.n($),B=a(670),J=a.n(B),M=a(679),G=a.n(M),H=a(673),Q=a.n(H),Z=a(671),q=a.n(Z),K=a(672),X=a.n(K),Y=a(674),ee=a.n(Y),te=a(676),ae=a.n(te),re=a(677),ie=a.n(re),ne=a(678),se=a.n(ne),oe=a(682),ce=a.n(oe),le=a(675),de=a.n(le),ue=a(680),fe=a.n(ue),je=a(683),pe=a.n(je),be=a(2),he=["children","onClose"],ve="GAME_SESSION_ALPHA_A_",Oe="_SPLIT_OWNER",ge="_SPLIT_HIRED",me={Add:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(U.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Check:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(J.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Clear:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(q.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Delete:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(X.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),DetailPanel:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(Q.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Edit:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(ee.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Export:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(de.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Filter:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(ae.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),FirstPage:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(ie.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),LastPage:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(se.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),NextPage:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(Q.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),PreviousPage:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(G.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),ResetSearch:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(q.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),Search:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(fe.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),SortArrow:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(N.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),ThirdStateCheck:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(ce.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))})),ViewColumn:Object(f.forwardRef)((function(e,t){return Object(be.jsx)(pe.a,Object(u.a)(Object(u.a)({},e),{},{ref:t}))}))};function xe(e,t,a){var r=e.filter((function(e){return e[t]===a}));if(r.length>0)return r[0]}function Ve(e,t,a,r,i,n,s){var o=Object(be.jsx)("div",{}),c="$";i.toUpperCase().includes("REVV")&&(c="REVV");var l=i.replace(/\D/g,"");if(e&&e.total>0){var d=e.total,u=e.hired,f=e.owner,j=f/d,p=u/d;f=t.owner,u=t.hired;var b=!1,h=!1;!n&&r&&(h=void 0===n,j=.5,p=.5,b=!0),r||(j=1);var v=!1;for(var O in a){a[O].unit=c;var g=1,m=1;if(a[O].prize<1||b){if(O<a.length-1){var x=parseInt(O)+1;a[x].rank-a[O].rank>1&&(v=!0,a[O].rankString=a[O].rank.toString()+" - "+(a[x].rank-1).toString(),m=g=parseInt(a[x].rank)-parseInt(a[O].rank))}else v&&(a[O].rankString=a[O].rank.toString()+"+*",g=u>a[O].rank?u-a[O].rank:-1,m=f>a[O].rank?f-a[O].rank:-1);a[O].rankString||(a[O].rankString=a[O].rank.toString());var R=a[O].prize*(h?1:l);-1!==g?(a[O].hiredPrize=((h?1:p)*R/g).toFixed(2),O>1&&parseInt(a[O].hiredPrize)>parseInt(a[O-1].hiredPrize)&&(a[O].hiredPrize=.3*a[O-1].hiredPrize)):a[O].hiredPrize=0,-1!==m?(a[O].ownerPrize=((h?1:j)*R/m).toFixed(2),O>1&&parseInt(a[O].ownerPrize)>parseInt(a[O-1].ownerPrize)&&(a[O].ownerPrize=.3*a[O-1].ownerPrize)):a[O].ownerPrize=0}}o=Object(be.jsxs)(S.a,{children:[Object(be.jsx)(F.a,{children:Object(be.jsxs)(C.a,{children:[Object(be.jsx)(T.a,{children:"Rank"}),Object(be.jsxs)(T.a,{children:["Driver Prize ",r&&"("+(100*j).toFixed(2)+"%)"]}),r&&Object(be.jsxs)(T.a,{children:["Hired Prize (",(100*p).toFixed(2),"%)"]})]})}),Object(be.jsx)(D.a,{children:a.map((function(e){return Object(be.jsxs)(C.a,{children:[Object(be.jsx)(T.a,{children:e.rankString?e.rankString:e.rank}),Object(be.jsxs)(T.a,{children:[r||s?e.ownerPrize:e.prize," ",c]}),r&&Object(be.jsxs)(T.a,{children:[e.hiredPrize," ",c]})]})}))})]})}else o=Object(be.jsx)(V.a,{sx:{minWidth:275},children:Object(be.jsx)(P.a,{align:"center",children:Object(be.jsx)("h1",{children:"Prize Data Not Available"})})});return o}var Pe=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).prizeAsyncGenerator=Object(s.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.generatePrizeTableContent(r.props.eventData.sessionData,r.props.eventData.participation,r.props.eventData.data.prize,r.props.eventData.data.splitLeaderboard,r.props.eventData.data.prize_total.toString(),r.props.eventData.data.dynamicPrizePoolRatio,r.props.eventData.data.percentagePrizePool);case 1:case"end":return e.stop()}}),e)}))),r.state={prizeTable:Object(be.jsx)(z.a,{})},r}return Object(c.a)(a,[{key:"generatePrizeTableContent",value:function(e,t,a,r,i,n,s){this.setPrizeTable(Ve(e,t,a,r,i,n,s))}},{key:"setPrizeTable",value:function(e){this.setState({prizeTable:e})}},{key:"componentDidMount",value:function(){this.prizeAsyncGenerator()}},{key:"render",value:function(){return Object(be.jsx)("div",{children:this.state.prizeTable})}}]),a}(f.Component),Re=function(e){var t=e.children,a=e.onClose,i=Object(r.a)(e,he);return Object(be.jsxs)(w.a,Object(u.a)(Object(u.a)({sx:{m:0,p:2}},i),{},{children:[t,a?Object(be.jsx)(k.a,{"aria-label":"close",onClick:a,style:{position:"absolute",right:8,top:8,color:function(e){return e.palette.grey[500]}},children:Object(be.jsx)(L.a,{})}):null]}))};var we=[{title:"Series",field:"data.series",hidden:!0},{title:"Name",field:"data.name",filterPlaceholder:"Filter Name"},{title:"Rank",field:"rank",filterPlaceholder:"Filter Rank",hidden:!0},{title:"Time",field:"time",filterPlaceholder:"Filter Time",hidden:!0},{title:"REVV",field:"RewardString",filterPlaceholder:"Filter REVV",hidden:!0},{title:"Tries",field:"tries",filterPlaceholder:"Filter Tries",hidden:!0},{title:"View Pizes",field:"",render:function(e){return new Date(e.endTimestamp).getTime()<(new Date).getTime()?Object(be.jsx)(m.a,{trigger:Object(be.jsx)("a",{children:"View Prizes"}),position:"bottom center",closeOnDocumentClick:!1,modal:!0,closeOnEscape:!0,children:function(t){return Object(be.jsxs)(R.a,{open:!0,onClose:t,children:[Object(be.jsx)(Re,{id:"customized-dialog-title",onClose:t,children:"Prize Distribution"}),Object(be.jsx)(Pe,{eventData:e})]})}}):Object(be.jsxs)("div",{children:[new Date(e.startTimestamp).getTime()<(new Date).getTime()?"In Progress":"Upcoming","..."]})}},{title:"Start",field:"startTimestamp",type:"date",filterPlaceholder:"Filter Start"},{title:"End",field:"endTimestamp",type:"date",filterPlaceholder:"Filter End"},{title:"Track",field:"data.track",filterPlaceholder:"Filter Track"},{title:"Penalties",field:"data.penaltySystem",render:function(e){return e.data.penaltySystem?Object(be.jsx)(A.a,{checked:!0}):Object(be.jsx)(A.a,{checked:!1})}},{title:"Laps",field:"data.lapCount",filterPlaceholder:"Filter Laps"},{title:"Weather",field:"data.weather",filterPlaceholder:"Filter Weather"},{title:"Total Prize",field:"data.prize_total_formatted",filterPlaceholder:"Filter Prize"},{title:"id",field:"id",hidden:!0},{title:"percentagePrizePool",field:"data.percentagePrizePool",hidden:!0},{title:"dynamicPrizePoolRatio",field:"data.dynamicPrizePoolRatio",hidden:!0},{title:"splitLeaderboard",field:"data.splitLeaderboard",hidden:!0}];function Ee(e){return e.map((function(e){return e.startTimestamp=new Date(parseFloat(e.startTimestamp)),e.endTimestamp=new Date(parseFloat(e.endTimestamp)),e.data.prize_total.toString().toUpperCase().includes("REVV")?e.data.prize_total_formatted=e.data.prize_total:e.data.prize_total_formatted=e.data.prize_total.toString()+" $",e})),(e=e.filter((function(e){return!e.data.practice}))).sort((function(e,t){return new Date(t.startTimestamp)-new Date(e.startTimestamp)})),e}var ke=function(e){Object(l.a)(a,e);var t=Object(d.a)(a);function a(e){var r;return Object(o.a)(this,a),(r=t.call(this,e)).BasicTable=Object(s.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,O.get("events").then((function(e){t=Ee(t=e.data)})).catch((function(e){console.error(e)}));case 2:return e.next=4,O.get("leaderboards").then((function(e){r.setPrizeData(e.data,t)})).catch((function(e){console.error(e)}));case 4:r.setEventData(t);case 5:case"end":return e.stop()}}),e)}))),r.setPrizeData=function(){var e=Object(s.a)(n.a.mark((function e(t,a){var r;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r={},t.forEach((function(e){var t=e.leaderboard_id.includes(Oe),a=e.leaderboard_id.includes(ge),i=e.leaderboard_id.replace(ve,"").replace(Oe,"").replace(ge,""),n=parseInt(e.count.$numberLong);t&&(r[i]?r[i].owner=n:r[i]={owner:n}),a&&(r[i]?r[i].hired=n:r[i]={hired:n}),t||a||(r[i]?r[i].total=n:r[i]={total:n}),r[i]&&r[i].hired&&r[i].owner&&(r[i].total=parseInt(r[i].hired)+parseInt(r[i].owner))})),e.next=4,O.get("sessions").then((function(e){var t=e.data;a.forEach((function(e){var a=xe(t,"session_id",e.id.toUpperCase());a&&(e.sessionData=a),r[e.id.toUpperCase()]&&(e.participation=r[e.id.toUpperCase()])}))})).catch((function(e){console.error(e)}));case 4:case"end":return e.stop()}}),e)})));return function(t,a){return e.apply(this,arguments)}}(),r.getREVVPrice=function(){var e=Object(s.a)(n.a.mark((function e(t){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h.a.get("price?ids=revv&vs_currencies=usd").then((function(e){r.setREVVPrice(e.data.revv.usd)})).catch((function(e){console.error(e)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.setWalletPosition=function(e,t){r.setState({walletPositions:e});var a=JSON.parse(JSON.stringify(we));(a=a.filter((function(e){return""!==e.field})))[2].hidden=!1,a[3].hidden=!1,a[4].hidden=!1,a[5].hidden=!1,r.setState({columns:a}),r.getREVVPrice();var i=0,n=0,s=0,o=0,c=0,l=0;r.state.eventData.forEach((function(a){a.REVVReward=0,a.dollarReward=0,a.rank=0;var r=t.reduce((function(e,t){return e+(new Date(t.timeStamp)>=new Date(a.startTimestamp)&&new Date(t.timeStamp)<=new Date(a.endTimestamp))}),0);if(a.sessionData&&e[a.id]){var d=e[a.id],u=parseInt(d.rank);a.rank=u,a.time=function(e){var t=Math.floor(e/6e4),a=(e%6e4/1e3).toFixed(3);return t+":"+(a<10?"0":"")+a}(e[a.id].time),Ve(a.sessionData,a.participation,a.data.prize,a.data.splitLeaderboard,a.data.prize_total.toString(),a.data.dynamicPrizePoolRatio,a.data.percentagePrizePool);for(var f=a.data.prize,j=void 0,p=0;p<f.length;p++){var b=f[p],h=p+1;if(h===f.length){j=b;break}if(u>=parseInt(b.rank)&&u<parseInt(f[h].rank)){j=b;break}}if(a.unit="REVV",j){var v="";v=a.data.splitLeaderboard?d.hired?j.hiredPrize:j.ownerPrize:a.data.percentagePrizePool?j.ownerPrize:j.prize,"REVV"===j.unit?(a.tries=r,l+=parseFloat(r),r>0&&(c+=1),o+=1,a.REVVReward+=parseFloat(v),a.RewardString=a.REVVReward.toString()+" REVV",i+=parseFloat(v),s+=u):(a.unit="$",a.tries=r,a.dollarReward+=parseFloat(v),n+=parseFloat(v),a.RewardString=a.dollarReward.toString()+" $")}}})),s>0&&i>0?r.setAverages(i/o,s/o,l/c):r.setAverages(0,0),r.setTotalPrizes(i,n,l),r.setEventDataLoaded(!0)},r.getWalletPositions=Object(s.a)(n.a.mark((function e(){var t,a,i;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.setEventDataLoaded(!1),t={},e.next=4,O.get("walletPositions",{params:{walletAddress:r.state.walletAddress.toUpperCase()}});case 4:return a=(a=e.sent).data,r.state.eventData.forEach((function(e){if(e.data.splitLeaderboard){var r=ve+e.id.toUpperCase()+Oe,i=ve+e.id.toUpperCase()+ge,n=xe(a,"leaderboard_id",r),s=xe(a,"leaderboard_id",i);n?t[e.id]=n:s&&(s.hired=!0,t[e.id]=s)}else{var o=ve+e.id.toUpperCase(),c=xe(a,"leaderboard_id",o);c&&(t[e.id]=c)}})),e.next=9,g.a.get("&address=".concat(r.state.walletAddress)).then((function(e){i=e.data.result,i=r.filterTransactions(i)})).catch((function(e){console.error(e)}));case 9:r.setWalletPosition(t,i);case 10:case"end":return e.stop()}}),e)}))),r.state={eventData:void 0,eventDataLoaded:!1,walletAddress:"",walletPositions:void 0,columns:we,totalREVV:void 0,totalDollars:void 0,totalTries:void 0,REVVPrice:0,averageRank:0,averageREVV:0,averageTries:0},r}return Object(c.a)(a,[{key:"setEventData",value:function(e){this.setState({eventData:e,eventDataLoaded:!0})}},{key:"setEventDataLoaded",value:function(e){this.setState({eventDataLoaded:e})}},{key:"componentDidMount",value:function(){this.BasicTable()}},{key:"setWalletAddress",value:function(e){this.setState({walletAddress:e,walletPositions:void 0,columns:we,totalREVV:void 0,totalDollars:void 0,totalTries:void 0,REVVPrice:0,averageRank:0,averageREVV:0,averageTries:0})}},{key:"filterWallet",value:function(e){return e.wallet===this.walletAddress}},{key:"setREVVPrice",value:function(e){this.setState({REVVPrice:e})}},{key:"setTotalPrizes",value:function(e,t,a){this.setState({totalREVV:e,totalDollars:t,totalTries:a})}},{key:"filterTransactions",value:function(e){return e=(e=e.filter((function(e){return"REVV"===e.tokenSymbol&&(e.to.toUpperCase()==="0x069895FdA566d0364ABEc6e290BeE3D565c55666".toUpperCase()||"0X955694777027A9A343B19D38C3DBEE1D494CFA24"===e.to.toUpperCase())&&"5000000000000000000"===e.value}))).map((function(e){return e.timeStamp=new Date(1e3*e.timeStamp),e}))}},{key:"setAverages",value:function(e,t,a){this.setState({averageREVV:e,averageRank:t,averageTries:a})}},{key:"render",value:function(){var e=this;return Object(be.jsxs)(E.a,{container:!0,spacing:3,children:[Object(be.jsx)(E.a,{item:!0,md:12,xs:12,children:Object(be.jsx)(y.a,{id:"wallet-address",label:"Wallet Address",variant:"outlined",fullWidth:!0,focused:!0,placeholder:"0x000...",onChange:function(t){return e.setWalletAddress(t.target.value)}})}),Object(be.jsx)(E.a,{item:!0,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(x.a,{color:"primary",fullWidth:!0,variant:"contained",onClick:function(){return e.getWalletPositions()},children:"Get Wallet List"})}),this.state.totalREVV&&Object(be.jsxs)(j.a.Fragment,{children:[Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"totalRevv",label:"Total REVV (REVV Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.totalREVV.toFixed(2).toString()+" REVV"+(this.state.REVVPrice?" ("+(this.state.REVVPrice*this.state.totalREVV).toFixed(2).toString()+" $)":"")})}),Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"totalDollars",label:"Total Dollars ($ Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.totalDollars.toFixed(2).toString()+" $"})})]}),this.state.averageRank>0&&Object(be.jsxs)(j.a.Fragment,{children:[Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"averageRank",label:"Average Rank (REVV Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.averageRank.toFixed(0).toString()})}),Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"averageREVV",label:"Average REVV Earned (REVV Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.averageREVV.toFixed(2).toString()+" REVV"+(this.state.REVVPrice?" ("+(this.state.REVVPrice*this.state.averageREVV).toFixed(2).toString()+" $)":"")})})]}),this.state.totalTries&&Object(be.jsxs)(j.a.Fragment,{children:[Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"totalTries",label:"Total Tries (REVV Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.totalTries.toFixed(0).toString()+" Tries"+(this.state.REVVPrice?" ("+5*this.state.totalTries+" REVV/"+(this.state.REVVPrice*this.state.totalTries*5).toFixed(2).toString()+" $)":"")})}),Object(be.jsx)(E.a,{item:!0,md:6,xs:12,alignContent:"center",alignItems:"center",children:Object(be.jsx)(y.a,{id:"averageTries",label:"Average Tries (REVV Prize Structure)",variant:"outlined",disabled:!0,fullWidth:!0,value:this.state.averageTries.toFixed(0).toString()+" Tries"+(this.state.REVVPrice?" ("+(5*this.state.averageTries).toFixed(2)+" REVV/"+(this.state.REVVPrice*this.state.averageTries*5).toFixed(2).toString()+" $)":"")})})]}),Object(be.jsx)(E.a,{item:!0,xs:12,children:Object(be.jsx)(b.a,{theme:Object(I.a)(),style:{width:"100%",display:"grid"},title:"REVV Leaderboards",columns:this.state.columns,data:this.state.eventData,icons:me,isLoading:!this.state.eventDataLoaded,options:{pageSize:10,pageSizeOptions:[5,10,20,{value:this.state.eventData?parseInt(this.state.eventData.length):100,label:"All"}],filtering:!0,selection:!0,search:!1,toolbar:!0,grouping:!0,exportButton:!0,exportAllData:!0},onSelectionChange:function(t){var a=0,r=0,i=0,n=0,s=0,o=0;0===t.length&&(t=e.state.eventData),t.forEach((function(e){a+=parseFloat(e.REVVReward),r+=parseFloat(e.dollarReward),"REVV"===e.unit&&(i+=parseFloat(e.rank),n+=1,o+=e.tries,e.tries&&e.tries>0&&(s+=1))})),i>0&&a>0?e.setAverages(a/n,i/n,o/s):e.setAverages(0,0),e.setTotalPrizes(a,r,o)}})})]})}}]),a}(f.Component)},530:function(e,t,a){"use strict";var r=a(85),i=a.n(r);t.a=i.a.create({baseURL:"https://api.polygonscan.com/api?module=account&action=tokentx&contractaddress=0x70c006878a5a50ed185ac4c87d837633923de296&sort=desc&apikey=NW6MQ4UW5JIEVBH61JW4AK3WY2Q27ZZIM7"})}}]);
//# sourceMappingURL=9.b72fab0d.chunk.js.map